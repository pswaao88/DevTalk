# ADR-007: MessageStatus는 전달 성공 여부가 아닌 생성 결과를 의미한다

## 상태

Accepted

## 결정 시점

2026-01-03

## 배경

메시지 처리 과정에서 실패 상황을 어떻게 표현할지에 대한 기준이 필요했다.

- AI 응답 실패를 예외로 처리하면 서버 흐름이 끊길 수 있다
- 전달 성공 여부와 메시지 생성 성공 여부가 혼동될 수 있었다
- 실패 응답도 기록으로 남길 필요가 있었다

MessageStatus의 의미를 단순 성공/실패로 둘 것인지,
혹은 전달 상태까지 포함할 것인지가 고민 지점이었다.

## 결정

MessageStatus는 메시지의 전달 성공 여부가 아니라,
메시지 생성 과정의 기술적 성공 여부를 의미한다.

- OK: 메시지가 정상적으로 생성되어 기록됨
- FAILED: 메시지 생성 과정에서 기술적 실패 발생

## 이유

- 의미적 정답 여부와 기술적 성공 여부를 분리해야 한다
- 실패 또한 분석 대상 기록으로 남기기 위함이다

의도적으로 포기한 부분은 다음과 같다.

- 읽음 여부
- 전달 보장 상태
- 메시지 품질 판단

## 결과

- 실패한 AI 응답도 Message로 기록된다
- 예외 대신 상태 값으로 실패를 표현한다
- 프론트엔드 UI가 실패 상황에서도 깨지지 않는다

이 기준은 이후 로그 분석과 ProblemWarruru 설계에 영향을 준다.
