# DESIGN-002-LLM보안및실패처리흐름

## 목적
DevTalk에서 LLM을 사용할 때 발생할 수 있는 보안 문제와  
응답 실패 상황을 안전하게 처리하기 위한 기본 원칙과 흐름을 정리한다.

본 문서는 반드시 지켜야 할 기준을 정의한다.

## 내용

### LLM 사용 위치
- LLM 연동은 백엔드에서만 수행한다.
- 프론트엔드는 LLM API를 직접 호출하지 않는다.
- 프론트엔드는 개발톡 백엔드 API만 호출한다.

### API Key 관리
- LLM API Key는 서버 환경변수인 .env로 관리한다.
- 코드 및 로그에 API Key가 노출되지 않도록 한다.

### LLM 실패 처리
- LLM 응답 실패 시 서버의 전체 처리 흐름은 중단되지 않는다.
- LLM 실패는 MessageStatus = FAILED 로 기록한다.
- FAILED 메시지도 일반 메시지와 동일하게 로그에 포함한다.

### 민감 정보 처리
- LLM 요청/응답에 포함된 민감 정보는 로그에 그대로 저장하지 않는다.
- 외부로 노출되는 응답에는 내부 오류 정보가 포함되지 않도록 한다.

## 결과
위 기준을 통해 다음을 보장한다.

- LLM 실패가 서비스 전체 실패로 이어지지 않는다.
- 실패 상황도 문제 해결 과정의 일부로 기록된다.
- API Key 및 민감 정보 노출 위험을 최소화한다.
